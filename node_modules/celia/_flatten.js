/*
 * celia.js v6.1.4
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
'use strict';

var _append = require('./_append.js');
var _loop = require('./_loop.js');

var isArray = Array.isArray;

function flatten(arr, result, depth) {
  _loop(arr, 0, arr.length, function (n) {
    if (depth > 0) {
      if (isArray(n)) {
        flatten(n, result, --depth);
      } else {
        _append(result, n);
      }
    } else {
      if (isArray(n)) {
        _loop(n, 0, n.length, function (m) {
          _append(result, m);
        });
      } else {
        _append(result, n);
      }
    }
  });
  return result;
}

module.exports = flatten;

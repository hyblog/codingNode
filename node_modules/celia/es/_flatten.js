/*
 * celia.js v6.1.4
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
import append from './_append.js';
import loop from './_loop.js';

var isArray = Array.isArray;

function flatten(arr, result, depth) {
  loop(arr, 0, arr.length, function (n) {
    if (depth > 0) {
      if (isArray(n)) {
        flatten(n, result, --depth);
      } else {
        append(result, n);
      }
    } else {
      if (isArray(n)) {
        loop(n, 0, n.length, function (m) {
          append(result, m);
        });
      } else {
        append(result, n);
      }
    }
  });
  return result;
}

export default flatten;

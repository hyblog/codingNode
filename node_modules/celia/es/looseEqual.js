/*
 * celia.js v6.1.4
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
import isObject from './isObject.js';
import isDate from './isDate.js';
import isRegExp from './isRegExp.js';

var isArray = Array.isArray;
function looseEqual(a, b) {
  if (a === b) {
    return true;
  }
  if (isObject(a) && isObject(b)) {
    if (isArray(a) && isArray(b)) { // 判断是否是数组
      return a.length === b.length && a.every(function (e, i) {
        return looseEqual(e, b[i]);
      });
    } else if (isDate(a) && isDate(b)) { // 判断日期
      return +a === +b;
    } else if (isRegExp(a) && isRegExp(b)) { // 正则
      return a.toString() === b.toString();
    } else { // 对象
      var keysA = Object.keys(a);
      var keysB = Object.keys(b);
      return keysA.length === keysB.length && keysA.every(function (key) {
        return looseEqual(a[key], b[key]);
      });
    }
  }
  return false;
}

export default looseEqual;

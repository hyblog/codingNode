/*
 * celia.date.js v1.0.0
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
'use strict';

require('celia/isNil');
require('celia/_loop');
var _dateConsts = require('./_dateConsts-9a8bf1f4.js');
var _normalizeUnit = require('./_normalizeUnit-294e3505.js');
var _startOf = require('./_startOf-17a0ec71.js');

function endOf (date, unit) {
  unit = _normalizeUnit.normalizeUnit(unit, _normalizeUnit.MILLISECOND);

  var time = 0;

  switch (unit) {
    case _normalizeUnit.YEAR:
      time = _startOf.startOfDate(date, date.getFullYear() + 1, 0, 1) - 1;
      break;
    case _normalizeUnit.MONTH:
      time = _startOf.startOfDate(date, null, date.getMonth() + 1, 1) - 1;
      break;
    case _normalizeUnit.DATE:
    case _normalizeUnit.DAY:
      time = _startOf.startOfDate(date) + _dateConsts.MS_OF_DAY - 1;
      break;
    case _normalizeUnit.HOUR:
      time = _startOf.startOfTime(date, _dateConsts.MS_OF_HOUR) + _dateConsts.MS_OF_HOUR - 1;
      break;
    case _normalizeUnit.MINUTE:
      time = _startOf.startOfTime(date, _dateConsts.MS_OF_MINUTE) + _dateConsts.MS_OF_MINUTE - 1;
      break;
    case _normalizeUnit.SECOND:
      time = _startOf.startOfTime(date, _dateConsts.MS_OF_SECOND) + _dateConsts.MS_OF_SECOND - 1;
      break;
  }

  time && date.setTime(time);

  return date;
}

module.exports = endOf;

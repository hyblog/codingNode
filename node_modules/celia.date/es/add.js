/*
 * celia.date.js v1.0.0
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
import isObject from 'celia/isObject';
import forOwn from 'celia/_forOwn';
import 'celia/isNil';
import { p as parseArray } from './_parseArray-d7b9616a.js';
import 'celia/_loop';
import './_dateConsts-b029053d.js';
import { Y as YEAR, M as MONTH, D as DAY, H as HOUR, a as MINUTE, S as SECOND, b as MILLISECOND, n as normalizeUnit } from './_normalizeUnit-4674c723.js';

function getIndex(unit) {
  unit = normalizeUnit(unit, MILLISECOND);
  switch (unit) {
    case YEAR:
      return 0;
    case MONTH:
      return 1;
    case DAY:
      return 2;
    case HOUR:
      return 3;
    case MINUTE:
      return 4;
    case SECOND:
      return 5;
    case MILLISECOND:
      return 6;
  }
}

function add (date, num, unit) {
  var arr = [
    date.getFullYear(),
    date.getMonth(),
    date.getDate(),
    date.getHours(),
    date.getMinutes(),
    date.getSeconds(),
    date.getMilliseconds()
  ];
  if (isObject(num)) {
    forOwn(num, function (val, key) {
      arr[getIndex(key)] += val;
    });
  } else {
    arr[getIndex(unit)] += num;
  }
  date.setTime(+parseArray(arr));
  return date;
}

export default add;

/*
 * celia.date.js v1.0.0
 * (c) 2018-2019 Jesse Feng
 * Released under the MIT License.
 */
'use strict';

var _dateConsts = require('./_dateConsts-9a8bf1f4.js');
var repeat = require('celia/_repeat');
var isUndefined = require('celia/isUndefined');
require('./isLeapYear.js');
var _dayOfYear = require('./_dayOfYear-3bb28219.js');

function dayOfYear (date, val) {
  var arr = _dayOfYear.daysInYear(date);
  var month = date.getMonth();
  var count = 0;
  repeat(0, month, function (i) {
    count += arr[i];
  });
  count += date.getDate();
  if (isUndefined(val)) {
    return count;
  } else {
    date.setTime(+date + ((val - count) * _dateConsts.MS_OF_DAY));
    return date;
  }
}

module.exports = dayOfYear;
